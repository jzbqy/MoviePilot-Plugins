# QB跳校助手 - MoviePilot V2 插件

第三方插件市场：https://github.com/jzbqy/MoviePilot-Plugins

## 📋 插件信息

- **插件名称**：QB跳校助手
- **版本**：v1.0.3
- **作者**：jzbqy
- **支持平台**：MoviePilot V2
- **支持下载器**：qBittorrent

## 🎯 功能简介

QB跳校助手是一个专为MoviePilot V2设计的插件，用于自动化处理qBittorrent下载器的跳校操作。通过导出种子文件、删除原任务、重新添加并跳过校验的方式，实现快速跳校功能。

### 核心功能
- ✅ **自动跳校**：导出 `.torrent` → 删除原任务 → 重新添加（跳过校验）
- ✅ **保留设置**：保留原保存路径、分类、标签
- ✅ **智能筛选**：支持按标签、分类筛选处理任务
- ✅ **数据统计**：提供详细的跳校统计和历史记录
- ✅ **Tracker映射**：支持自定义tracker站点名称映射
- ✅ **定时执行**：支持cron定时任务和立即执行

## 📦 安装方法

### 方法一：从GitHub仓库安装（推荐）

1. **添加第三方源**
   - 进入 MoviePilot V2 后台 → 插件 → 第三方源
   - 添加仓库地址：`https://github.com/jzbqy/MoviePilot-Plugins`

2. **安装插件**
   - 在插件市场中找到"QB跳校助手"
   - 点击"安装到本地"

### 方法二：手动安装

1. **下载插件文件**
   ```bash
   git clone https://github.com/jzbqy/MoviePilot-Plugins.git
   ```

2. **复制插件目录**
   - 将 `plugins.v2/qbreseedjump/` 目录复制到MoviePilot插件目录
   - 确保 `package.v2.json` 包含插件配置

## ⚙️ 配置说明

### 基本配置

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| **启用插件** | 开启/关闭插件功能 | 开启 |
| **消息通知** | 跳校完成后发送通知 | 关闭 |
| **立即运行一次** | 保存配置后立即执行一次 | 关闭 |
| **执行周期** | Cron表达式，如 `5 7 * * *`（每天7:05执行） | 无 |
| **下载器** | 选择要处理的qBittorrent下载器 | 必选 |

### 高级配置

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| **仅处理暂停任务** | 只处理暂停状态的下载任务 | 开启 |
| **包含标签** | 只处理包含指定标签的任务 | `IYUU自动辅种` |
| **包含分类** | 只处理指定分类的任务 | 空 |
| **处理完成标签** | 跳校完成后添加的标签 | `已跳校` |
| **自动开始** | 跳校完成后自动开始下载 | 开启 |
| **保留原分类** | 跳校后保留原分类设置 | 开启 |
| **删除导出的种子文件** | 跳校完成后删除导出的.torrent文件 | 关闭 |

### 种子文件目录映射

为每个qBittorrent下载器配置种子文件存储目录：

```json
{
  "QB下载器1": "D:/qBittorrent/BT_backup",
  "QB下载器2": "/home/user/qbittorrent/backup"
}
```

### Tracker映射配置

自定义tracker站点名称映射，用于统计显示：

```json
{
  "https://tracker.example.com/announce": "示例站点",
  "https://another-tracker.com/announce": "另一个站点"
}
```

## 🚀 使用方法

### 1. 基本使用

1. **配置下载器**：在"下载器"选项中选择要处理的qBittorrent实例
2. **设置执行周期**：配置cron表达式或使用"立即运行一次"
3. **保存配置**：点击保存，插件将开始工作

### 2. 立即执行

- 勾选"立即运行一次"选项
- 点击保存配置
- 插件将立即执行一次跳校操作

### 3. 定时执行

- 在"执行周期"中设置cron表达式
- 例如：`5 7 * * *` 表示每天7:05执行
- 插件将按设定时间自动执行

## 📊 数据统计

插件提供详细的数据统计功能：

### 统计页面功能
- **今日统计**：显示当天的跳校次数和体积
- **历史统计**：显示所有时间的跳校数据
- **站点统计**：按tracker站点分类显示数据
- **清理功能**：支持清理所有历史数据

### 数据持久化
- 统计数据自动保存到MoviePilot数据库
- 重启后数据不会丢失
- 支持数据导出和清理

## ⚠️ 注意事项

### 重要提醒
- **跳校有风险，操作需谨慎**
- 建议在测试环境先验证功能
- 确保有足够的磁盘空间存储种子文件

### 系统要求
- **仅支持qBittorrent**：不支持其他下载器
- **种子文件访问**：需要能访问qBittorrent的种子文件目录
- **权限要求**：需要qBittorrent的Web UI访问权限

### 配置要求
- **种子文件目录**：必须正确配置种子文件存储路径
- **下载器连接**：确保MoviePilot能正常连接qBittorrent
- **标签设置**：建议使用标签筛选，避免误操作

## 🔧 故障排除

### 常见问题

1. **插件无法安装**
   - 检查网络连接
   - 确认仓库地址正确
   - 查看MoviePilot日志

2. **跳校失败**
   - 检查种子文件目录配置
   - 确认qBittorrent连接正常
   - 查看插件日志

3. **统计数据不显示**
   - 检查tracker映射配置
   - 确认数据保存权限
   - 重启插件

### 日志查看

在MoviePilot日志中搜索 `qbreseedjump` 关键字查看详细日志：

```bash
docker logs mp_v2 | grep -i qbreseedjump
```

## 📝 更新日志

### v1.0.3
- 修复API认证问题
- 添加历史数据清理功能
- 优化tracker映射逻辑

### v1.0.2
- 修复数据持久化问题
- 优化通知系统

### v1.0.1
- 修复cron调度问题
- 添加立即运行功能

### v1.0.0
- 初始版本
- 支持qBittorrent跳校功能

## 🤝 支持与反馈

- **GitHub仓库**：https://github.com/jzbqy/MoviePilot-Plugins
- **问题反馈**：请在GitHub Issues中提交
- **功能建议**：欢迎提出改进建议

## 📄 许可证

本项目采用 MIT 许可证，详见 [LICENSE](LICENSE) 文件。

---

**免责声明**：本插件仅供学习和研究使用，使用者需自行承担使用风险。作者不对因使用本插件造成的任何损失负责。
